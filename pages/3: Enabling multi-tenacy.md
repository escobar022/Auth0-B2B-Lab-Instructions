# Step 3: Enabling multi-tenant use cases

Now that individual users can access the service, we have to think about bringing in our corporate users. Pizza0 already could win their first customer who provide their own Identity provider. You are asked to enable users from that organization to log into Pizza0 using Single Sign On.

0. For this lab we are providing sample organizations running on the Okta service. In order to create your organization visit ***TODO link to page*** and enter a name for your organization as well as the email address of a user that will be able to sign in through that organization. 
Try to come up with a unique name for your organization to avoid conflicting with organizations of other lab participants. Example: yourname-workshop
Once you have entered your detail, you should receive a password for your user as well as a client ID that you can use to set up the SSO connection.
Please note both as we will need it throughout the lab to login into Okta.

1. In order to let the newly created organization sign into our application, you have to register it as a new OpenID Connect (OIDC) enterprise connection. To do so, go to Authentication --> Enterprise --> Open ID connect in the Auth0 Dasboard and click create connection. Enter a connection name (this can be anything) and copy the Issuer URL and ClientID from the organisation you just created. Click on "Create" to complete the setup.
2. To make sure users are actually redirected to your new organization, click on "Login Experience" in your newly created connection. Add the domain of your newly created user into the "Identity Provider Domains" (e.g. example.com if your user was called test@example.com) and click on "Save" on the bottom of the page. Lastly, go to "Applications" and make sure your connection is enabled for your Pizza0 application.
3. Open an incognito window and sign into your application again (by clicking the login button). When you enter your newly created user now (e.g. test@example.com), you should be redirected to your newly created organization and be able to sign in with the credentials that you received when registering the organization.

4. Auth0 has a native concept of Organizations that makes it easier for you as a developer to organize and manage all your business customers and their login into your solution. To create an organization, go to "Organizations" in the sidebar of the Auth0 Dashboard and click on "Create Organization". Give it an easy to remember name (users will need it when signing into your app) and click "Add Organization.
5. Next, you need to enable the OIDC connection you just created in the new organization. In your organization, go to "Connections" -> "Enable Connections". Find the connection you have previously created and click "Enable Connection". In the next window, click on "Enable Auto-Membership" and "Save". This means that users who will access your app through this connection will automatically be part of your organization.

6. Lastly, we need to let our Pizza0 application know that we expect business users to sign in instead of everyday end users. Find your application by navigating to "Applications" -> "Applications" in the Auth0 Dashboard and click on the application you have registered previously. In the following window you will find a tab called "Organizations". Navigate to that, enable the Display Organization Prompt and set the dropdown to "Team members of organizations". 
Note: Eventually the option to enable organizations will be greyed out. There will be a warning box that some login grants have to be disabled first. Click on "Disable Grants Now" and proceed. 

7. Return to your Pizza0 site and click on login. You will now be asked to enter your organizations name (which is the one you gave to your organization when you registered it). The login will automatically redirect you to your Identity Provider (aka Okta if you follow the lab), where you can sign in with your users credentials. After successful login you should now have an organization ID displayed in the header of the Pizza0 site.

### Congratulations, you can now start your successful B2B business! 
By completing these steps we now can safely integrate our business customers into our application and even make sure to keep track of them through organizations. Under the hood, this brings a lot of value: Your customers admins can still provision / deprovision users, control who has access to your app, and see how frequently your app is used. And you just saved a few days of building your own OpenID Connect integration! 

If you are doing this lab in a guided class, please wait for your instructor to continue the course. Otherwise, you may proceed to the next lab to see how you can give your application a lot more information about our users.